define(["require","jquery","Class","map"],function(e){"use strict";function a(){i.apply(this),this.layers=[{id:"osgeoWMS",name:"OpenLayers WMS",module:"osgeoWMS"},{id:"maaametiWMS",name:"Maa-ameti WMS",module:"maaametiWMS"},{id:"regioTeed",name:"Regio teed",module:"regioTeed"}],this.element=t("<ul />").addClass("vmap baseLayers"),this.render(),this.element.on("click","a",this.activateLayer.bind(this))}var t=e("jquery"),i=e("Class"),s=e("map");return a.prototype={render:function(){var e,a,i=[];for(e=0,a=this.layers.length;e<a;e+=1)i.push(t("<li />").addClass("vmap").append(t("<a />").attr("href","#"+this.layers[e].id).html(this.layers[e].name)));this.element.append(i)},activateLayer:function(e){var a,i;for(e="object"==typeof e&&e.currentTarget?t(e.currentTarget).attr("href").replace("#",""):e,a=0,i=this.layers.length;a<i;a+=1)e===this.layers[a].id&&(this.showLayer(this.layers[a]),t("a[href='#"+e+"']",this.element).parent().addClass("active").siblings(".active").removeClass("active"))},showLayer:function(a){e([a.module],function(e){e.map||(s.addLayer(e),e.setVisibility(!0))})}},new(i.extend(a))});